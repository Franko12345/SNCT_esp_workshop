<!doctype html><html><head><meta charset="utf-8"/><title>Blockly Sample App</title><style>:root{
      --bg: #0b0f14;
      --panel: #0f1620;
      --accent: #7cdbff;
      --muted: #9aa7b2;
      --success: #49d08a;
      --danger: #ff6b6b;
      --glass: rgba(255,255,255,0.03);
      --mono: "Fira Code", ui-monospace, SFMono-Regular, Menlo, Monaco, "Roboto Mono", monospace;
    }

    * { box-sizing: border-box; }
    html, body { height: 100%; margin: 0; }

    body {
      background: var(--bg);
      color: #e6eef3;
      font-family: Inter, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
      display: flex;
      flex-direction: column;
    }

    .card{
      width:100%;
      max-width:1100px;
      height:80vh;
      background:linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.01));
      border-radius:12px;
      box-shadow: 0 8px 40px rgba(2,6,12,0.7);
      padding:18px;
      display:flex;
      flex-direction:column;
      gap:12px;
      border:1px solid rgba(255,255,255,0.03);
    }

    header {
      background: linear-gradient(180deg, #0e1924, #09121b);
      padding: 12px 20px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      border-bottom: 1px solid rgba(255,255,255,0.05);
    }

    header h1 {
      font-size: 16px;
      margin: 0;
      color: #eaf6ff;
    }

    nav {
      display: flex;
      gap: 10px;
    }

    button.tab {
      background: none;
      border: 1px solid rgba(255,255,255,0.08);
      color: var(--muted);
      padding: 6px 12px;
      border-radius: 6px;
      cursor: pointer;
      transition: 0.2s;
    }

    button.tab.active {
      background: var(--accent);
      color: #000;
      font-weight: 600;
    }

    .header{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
    }

    .title{
      display:flex;
      gap:12px;
      align-items:center;
    }

    .dot{
      width:12px;height:12px;border-radius:50%;
      background: linear-gradient(135deg, #ff8a65, #ffcc80);
      box-shadow:0 2px 6px rgba(0,0,0,0.6) inset;
    }

    h1{font-size:16px;margin:0;color:#eaf6ff}
    p.desc{margin:0;color:var(--muted);font-size:13px}

    .editor{
      flex:1;
      display:flex;
      gap:12px;
      min-height:0;
    }

    textarea#code{
      flex:1;
      background:linear-gradient(180deg, #071018, #071216);
      border-radius:8px;
      border:1px solid rgba(255,255,255,0.03);
      padding:16px;
      font-family: var(--mono);
      font-size:13px;
      color:#d7f6ff;
      resize:none;
      outline:none;
      line-height:1.5;
      box-shadow: 0 4px 18px rgba(2,6,12,0.6);
      overflow:auto;
    }

    .sidebar{
      width:300px;
      max-width:36%;
      background:var(--panel);
      border-radius:8px;
      padding:12px;
      display:flex;
      flex-direction:column;
      gap:10px;
      border:1px solid rgba(255,255,255,0.02);
      font-size:13px;
      color:var(--muted);
    }

    .btn{
      display:inline-flex;
      align-items:center;
      gap:10px;
      background:linear-gradient(180deg,#005a6f,#003b4d);
      color:white;
      border:none;
      padding:10px 14px;
      border-radius:8px;
      font-weight:600;
      cursor:pointer;
      box-shadow: 0 6px 18px rgba(2,6,12,0.5);
    }
    .btn:disabled{opacity:.5;cursor:not-allowed}

    .log{
      background:linear-gradient(180deg, rgba(255,255,255,0.01), rgba(255,255,255,0.015));
      border-radius:8px;
      padding:10px;
      height:160px;
      overflow:auto;
      font-family: var(--mono);
      font-size:12px;
      color:#cfeefc;
      border:1px solid rgba(255,255,255,0.02);
    }

    .warn{
      background:linear-gradient(180deg, rgba(255,80,80,0.04), rgba(255,80,80,0.02));
      color: #ffdede;
      padding:8px;
      border-radius:6px;
      font-size:13px;
      border:1px solid rgba(255,80,80,0.06);
    }

    .muted{
      color:var(--muted); font-size:12px;
    }

    .small{
      font-size:12px;color:var(--muted)
    }

    .row{
      display:flex;align-items:center;gap:8px;justify-content:space-between;
    }

    .config{
      display:flex;flex-direction:column;gap:8px;
    }

    .field{
      display:flex;flex-direction:column;gap:6px;
    }

    input[type="text"]{
      padding:8px;border-radius:6px;border:1px solid rgba(255,255,255,0.03);background:rgba(255,255,255,0.01);color:#eaf6ff;font-family:var(--mono);font-size:13px;
    }

    .status-ok{color:var(--success)}
    .status-err{color:var(--danger)}
    footer.small{color:var(--muted);font-size:12px;text-align:left;margin-top:6px}
    @media (max-width:900px){
      .sidebar{display:none}
    }

    section {
      /* position: absolute; */
      inset: 0;
      display: none;
    }

    section.active {
      display: flex;
      height: 100%;
      align-items: center;
      justify-content: center;
    }

    #generatedCode {
      width: 100%;
      background: #111a22;
      color: #aef;
      padding: 12px;
      font-family: var(--mono);
      font-size: 13px;
      overflow: auto;
      border-top: 1px solid rgba(255,255,255,0.1);
    }</style><script defer="defer" src="bundle.js"></script></head><body><header><h1>ESP32 Blockly IDE + Code Sender</h1><nav><button id="tabBlockly" class="tab active">üß© Blockly</button> <button id="tabIDE" class="tab">üíª Sender</button></nav></header><section class="active" id="blocklySection"><div id="pageContainer"><div id="outputPane"><pre id="generatedCode"><code></code></pre></div><div id="blocklyDiv"></div></div></section><section id="senderSection"><div id="sender" class="card" role="main"><div class="header"><div class="title"><div class="dot" aria-hidden="true"></div><div><h1>Enviar c√≥digo Python ‚Äî dark editor</h1><p class="desc">Cole seu c√≥digo no campo grande e clique em <strong>Enviar C√≥digo</strong>. Atalho: <kbd>Ctrl</kbd>+<kbd>Enter</kbd></p></div></div><div class="small muted"><div>Destinat√°rio padr√£o: <code id="serverLabel">http://192.168.3.50</code></div></div></div><div class="editor" aria-live="polite"><textarea id="code" placeholder="# Cole o seu c√≥digo Python aqui..." spellcheck="false" autocomplete="off" autocapitalize="off" autocorrect="off"></textarea><aside class="sidebar" aria-label="Painel lateral"><div class="row"><div style="display:flex;flex-direction:column"><div style="font-weight:600">A√ß√µes</div><div class="muted">Envio ordenado: size ‚Üí code</div></div><div><button id="sendBtn" class="btn" title="Enviar c√≥digo">Enviar C√≥digo</button> <button id="runBtn" class="btn" title="Rodar c√≥digo">Rodar C√≥digo</button> <button id="stopBtn" class="btn" title="Parar c√≥digo">Parar C√≥digo</button></div></div><div class="field config"><label class="small">Servidor (edite se necess√°rio)</label> <input id="serverInput" value="http://192.168.3.50"/><div class="small muted">O endpoint de size ficar√° em <code>/?size=</code> e o envio POST em <code>/code</code>.</div></div><div><div style="font-weight:600">Logs</div><div id="log" class="log" aria-live="polite"></div></div><div><div style="font-weight:600">Observa√ß√µes</div><div class="muted small">‚Ä¢ O servidor precisa permitir CORS (Access-Control-Allow-Origin) para que o navegador consiga fazer as requisi√ß√µes.<br>‚Ä¢ Se servir esta p√°gina via <strong>https</strong>, o servidor tamb√©m precisa atender via https (caso contr√°rio o navegador bloquear√° por mixed-content).</div></div><footer class="small">Envio em: GET <code>/?size=bytes</code> ‚Üí POST <code>/code</code> (body = c√≥digo, Content-Type: text/plain)</footer></aside></div><div style="display:flex;gap:12px;align-items:center;justify-content:space-between"><div class="muted small">Tamanho calculado com TextEncoder (bytes). Primeiro envio √© obrigat√≥rio; segunda request s√≥ √© feita se a primeira obtiver sucesso (status 2xx).</div><div><button id="clearBtn" class="btn" style="background:linear-gradient(180deg,#333,#111);padding:8px 10px">Limpar</button></div></div></div></section></body></html>